<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<fragment xmlns="http://jmix.io/schema/flowui/fragment">
    <data>
        <instance id="unitDc" class="ru.thedevs.entity.Unit">
            <fetchPlan extends="_base"/>
            <loader id="unitDl" readOnly="true">
                <query>
                    <![CDATA[select e from Unit e where e.id = :curId]]>
                </query>
            </loader>
            <collection id="routesDc" property="route"/>
        </instance>
    </data>
    <content>
        <vbox id="root">
            <formLayout width="100%">
                <button id="backButton" text="msg://backBtn.caption" icon="ARROW_LEFT"/>
                <hbox>
                    <h4 id="begin" text="msg://begin.value"/>
                    <dateTimePicker id="beginDF" datatype="dateTime"/>
                </hbox>
                <hbox>
                    <label id="end" text="msg://end.value"/>
                    <dateTimePicker id="endDF" datatype="dateTime"/>
                </hbox>
                <button id="searchBtn" text="msg://searchBtn.caption" icon="SEARCH"
                />
                <button id="routesTableExcelExportBtn" action="routesTable.excelExport"/>
            </formLayout>
            <dataGrid id="routesTable" width="100%" dataContainer="routesDc"
                      selectionMode="MULTI">
                <actions>
                    <action id="excelExport" type="report_runListEntityReport"/>
                    <action id="read" type="list_read"/>
                    <action id="refresh" type="list_refresh"/>
                </actions>
                <columns>
                    <column property="beginTime"/>
                    <column property="distance">
                        <aggregation type="SUM"/>
                    </column>
                    <column property="duration"/>
                    <column property="endTime" visible="false"/>
                </columns>
            </dataGrid>
        </vbox>
    </content>
</fragment>