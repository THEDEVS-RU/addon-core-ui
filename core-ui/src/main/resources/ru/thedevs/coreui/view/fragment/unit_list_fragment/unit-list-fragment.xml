<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<fragment xmlns="http://jmix.io/schema/flowui/fragment">
    <data>
        <collection id="unitsDc" class="ru.thedevs.entity.Unit">
            <fetchPlan extends="_base"/>
            <loader id="unitsDl" readOnly="true">
                <query>
                    <![CDATA[select e from Unit e]]>
                </query>
            </loader>
        </collection>
    </data>
    <content>
        <vbox id="root" padding="false" margin="false">
            <genericFilter id="filter" width="100%"
                           dataLoader="unitsDl">
                <properties include=".*"
                            excludeProperties="id, protocol, position, device, group, createdDate, lastModifiedBy, lastModifiedDate"/>
            </genericFilter>
            <hbox id="buttonsPanel" width="100%">
                <button id="createButton" action="unitsDataGrid.create"/>
                <button id="routesButton" icon="MAP_MARKER" text="msg:///routesButton.caption"
                        enabled="false"/>
                <button id="indicatorButton" icon="STOPWATCH" text="msg:///indicatorButton.caption"
                        enabled="false"/>
                <button id="commandsButton" icon="DOWNLOAD" text="msg:///commandsButton.caption"
                        enabled="false"/>
                <button id="removeButton" action="unitsDataGrid.remove"
                        enabled="false"/>
                <button id="unitsTableExcelExportButton" action="unitsDataGrid.excelExport" text="Excel"/>
                <button id="hideThisButton" text="hide tab"/>
            </hbox>
            <dataGrid id="unitsDataGrid"
                      width="100%"
                      dataContainer="unitsDc"
                      classNames="unit-browse"
                      selectionMode="MULTI"
                      emptyStateText="msg://unitsTable.emptyStateMessage">
                <actions>
                    <action id="create" type="list_create" actionVariant="PRIMARY"/>
                    <action id="remove" type="list_remove" actionVariant="DANGER" icon="TRASH"/>
                    <action id="excelExport" type="report_runSingleEntityReport"/>
                </actions>
                <columns>
                    <column key="status" header="msg:///status.caption"/>
                    <column key="name" property="device.name"/>
                    <column key="lastPing" header="msg:///lastPing.header"/>
                    <column property="ident" visible="true"/>
                    <column property="tenant" visible="false"/>
                    <column property="createdBy" visible="false"/>
                </columns>
            </dataGrid>
        </vbox>
    </content>
</fragment>